<template>
  <div class="page" data-name="home">
    <!-- Top Navbar -->
    <div class="navbar navbar-large">
      <div class="navbar-bg"></div>
      <div class="navbar-inner">
        <div class="left">
          <a href="#" class="link icon-only panel-open" data-panel="left">
            <i class="icon f7-icons if-not-md">menu</i>
            <i class="icon material-icons if-md">menu</i>
          </a>
        </div>
        <div class="title sliding"><small><span>Time：</span><span id="lisa">Current Time...</span></small></div>
        <div class="right">
          <a href="#" class="link icon-only panel-open" data-panel="right">
            <i class="icon f7-icons if-not-md">briefcase</i>
            <i class="icon material-icons if-md">local_mall</i>
          </a>
        </div>
        <div class="title-large">
          <div class="title-large-text">Adverse Helper</div>
        </div>
      </div>
    </div>

    <!-- Scrollable page content-->
    <div class="page-content">
      <div class="block-title">Trial Version(V1.0.45) : Expired in 15 days.</div>
      <div class="card demo-card-header-pic">
        <div style="background-image:url(https://cdn.framework7.io/placeholder/nature-1000x600-3.jpg)"
          class="card-header align-items-flex-end">Adverse Event Report and Management</div>
        <div class="card-content card-content-padding">
          <p class="date">Published on January 21, 2022</p>
          <p>“医院不良事件上报分析系统”专门服务于医院不良事件的上报与分析研判，帮助医院管理者及时发现潜在的不安全因素，同时将问题进行总结及分享，并针对现在存在的问题制定相应的规范，从而减少医院不良事件的发生，提高医疗质量水平，使医院医疗质量提上一个新的台阶！</p>
          <!-- <p>“医院不良事件上报与分析管理系统”是专门服务于医院不良事件......的系统，它重点专注......，为院内XXX部门提供....的工具与平台，最终实现......！</p> -->
        </div>
        <div class="card-footer"><a href="#" class="link panel-open" data-panel="left">管理制度</a><a href="#" class="link panel-open" data-panel="right">工具箱</a><a href="#" class="button button-raised button-fill color-green">购买正式版</a></div>
      </div>
<!-- 
      <div class="block block-strong">
        <p><img src="static/images/addi_iceland.png" width="100%" height="80px" border="0" alt="addi_iceland.png is missing" /></p>
        <p>“医院不良事件上报与分析管理系统”是专门服务于医院不良事件......的系统，它重点专注......，为院内XXX部门提供....的工具与平台，最终实现......！</p>
        <p>
          <div class="row">
            <div class="col-25">
              <a href="#" class="button button-raised button-fill panel-open" data-panel="left">管理制度</a>
            </div>
            <div class="col-25">
              <a href="#" class="button button-raised button-fill panel-open" data-panel="right">工具表格</a>
            </div>
            <div class="col-10"></div>
            <div class="col-30">
              <a href="#" class="button button-raised button-fill color-green">购买正式版</a>
            </div>
            <div class="col-10"></div>
          </div>
        </p>
      </div> -->

      <div class="block-title">请选择您希望进行的操作：</div>
      <!-- <img src="static/images/addi_room.jpeg" width="100%" height="150px" border="0" alt="addi_room.jpeg is missing" /> -->
      <div class="block block-strong">
        <div class="row">
          <div class="col-30">
            <!-- <a href="#" class="button button-raised button-fill login-screen-open" data-login-screen="#my-login-screen">bbbb</a> -->
            <a href="#view-catalog" class="tab-link">
              <i class="icon f7-icons if-not-md">doc_richtext</i><!-- layers_alt_fill -->
              <i class="icon material-icons if-md">phone_android</i><!-- repeat -->
              <span class="tabbar-label">事件上报</span>
            </a>
          </div>
          <div class="col-30">
            <!-- <a href="#" class="button button-raised button-fill login-screen-open" data-login-screen="#my-login-screen">bbbb</a> -->
            <a href="/request-and-load/catg/3/" class="tab-link">
              <i class="icon f7-icons if-not-md">hand_raised_slash</i><!-- suit_spade_fill -->
              <i class="icon material-icons if-md">beenhere</i><!-- queue_music | layers_clear -->
              <span class="tabbar-label">事件审核</span>
            </a>
          </div>
          <div class="col-30">
            <!-- <a href="#" class="button button-raised button-fill popup-open" data-popup="#my-popup">Page "my-popup"</a> -->
            <a href="/profile/" class="tab-link tab-link-active popup-open">
              <i class="icon f7-icons if-not-md">person_2</i><!-- person_2_fill -->
              <i class="icon material-icons if-md">people</i><!-- person_2 -->
              <span class="tabbar-label">个人资料</span>
            </a>
          </div>
        </div>
        <div class="row">
            <ul></ul>
        </div>
        <div class="row">
          <div class="col-30">
            <!-- <a href="#" class="button button-raised button-fill popup-open" data-popup="#my-popup">Page "my-popup"</a> -->
            <a href="/request-and-load/catg/5/" class="tab-link tab-link-active popup-open">
              <i class="icon f7-icons if-not-md">wand_stars</i><!-- sun_dust_fill -->
              <i class="icon material-icons if-md">blur_linear</i><!-- movie | emoji_symbols -->
              <span class="tabbar-label">统计分析</span>
            </a>
          </div>
          <div class="col-30">
            <!-- <a href="#" class="button button-raised button-fill login-screen-open" data-login-screen="#my-login-screen">bbbb</a> -->
            <a href="/request-and-load/catg/6/" class="tab-link">
              <i class="icon f7-icons if-not-md">thermometer_snowflake</i><!-- cube_box_fill -->
              <i class="icon material-icons if-md">ac_unit</i><!-- games -->
              <span class="tabbar-label">根因分析</span>
            </a>
          </div>
          <div class="col-30">
            <!-- <a href="#" class="button button-raised button-fill login-screen-open" data-login-screen="#my-login-screen">bbbb</a> -->
            <a href="#view-settings" class="tab-link">
              <i class="icon f7-icons if-not-md">tickets</i><!-- shield_lefthalf_fill -->
              <i class="icon material-icons if-md">directions</i><!-- explict -->
              <span class="tabbar-label">行动计划</span>
            </a>
          </div>
        </div>
      </div>
<!-- 
      <div class="block-title">Navigation</div>
      <div class="list">
        <ul>
          <li>
            <a href="/about/" class="item-content item-link">
              <div class="item-inner">
                <div class="item-title">About</div>
              </div>
            </a>
          </li>
          <li>
            <a href="/form/" class="item-content item-link">
              <div class="item-inner">
                <div class="item-title">Form</div>
              </div>
            </a>
          </li>
        </ul>
      </div>
 -->
<!-- 
      <div class="block"><img src="static/images/addi_room.jpeg" width="100%" height="150px" border="0" alt="addi_room.jpeg is missing" /></div>

      <div class="block-title">如果您希望了解更多关于医院不良事件管理规范的相关信息，请参考下面链接</div>
      <div class="block block-strong">
        <div class="row">
          <div class="col-50">
            <a href="#" class="button button-raised button-fill panel-open" data-panel="left">管理制度</a>
          </div>
          <div class="col-50">
            <a href="#" class="button button-raised button-fill panel-open" data-panel="right">填报表格</a>
          </div>
        </div>
      </div>
 -->
      <div class="block-title">请您抽出宝贵时间参与问卷调查服务提出宝贵意见</div>
      <div class="block">
        <div class="row">
          <div class="col-50">
            <a href="#" class="button button-raised button-fill popup-open" data-popup="#my-popup">问卷调查</a>
          </div>
          <div class="col-50">
            <!-- <a href="#" class="button button-raised button-fill login-screen-open" data-login-screen="#my-login-screen">用户登陆</a> -->
            <a href="/about/" class="button button-raised button-fill popup-open">关于系统</a>
          </div>
        </div>
        <div class="row">
          <p>7x24小时服务热线：400-810-XXXX</p>
        </div>
        <div class="row">
          <p><span></span></p>
        </div>
      </div>

<!-- 
      <div class="list links-list">
        <ul>
          <li>
            <a href="/dynamic-route/blog/45/post/125/?foo=bar#about">Dynamic (Component) Route</a>
          </li>
          <li>
            <a href="/load-something-that-doesnt-exist/">Default Route (404)</a>
          </li>
          <li>
            <a href="/request-and-load/user/123456/">Request Data & Load</a>
          </li>
        </ul>
      </div>
 -->
    </div>
  </div>
</template>
<style>
:root {
  --f7-chip-font-size: 12px;
  --f7-chip-font-weight: normal;
  --f7-chip-media-font-size: 13px;
  --f7-chip-bg-color: rgba(0, 0, 0, 0.12);
  --f7-chip-outline-border-color: rgba(0, 0, 0, 0.12);
  --f7-chip-delete-button-color: #000;
}
  .icon-f7 {
    background: #EE350F;
    color: #fff !important;
    border-radius: 50%;
    text-align: center;
  }

  .icon-f7:before {
    content: '';/*content: '7';*/
  }

  .ios .icon-f7 {
    width: 29px;
    height: 29px;
    line-height: 29px;
  }

  .md .icon-f7 {
    width: 24px;
    height: 24px;
    line-height: 24px;
  }

  .demo-card-header-pic .card-header {
    height: 40vw;
    background-size: cover;
    background-position: center;
    color: #fff;
  }

  .demo-card-header-pic .card-content-padding .date {
    color: #8e8e93;
  }

  .demo-facebook-card .card-header {
    display: block;
    padding: 10px;
  }

  .demo-facebook-card .demo-facebook-avatar {
    float: left;
  }

  .demo-facebook-card .demo-facebook-name {
    margin-left: 44px;
    font-size: 14px;
    font-weight: 500;
  }

  .demo-facebook-card .demo-facebook-date {
    margin-left: 44px;
    font-size: 13px;
    color: #8e8e93;
  }

  .demo-facebook-card .card-footer {
    background: #fafafa;
  }

  .demo-facebook-card .card-footer a {
    color: #81848b;
    font-weight: 500;
  }

  .demo-facebook-card .card-content img {
    display: block;
  }

  .demo-facebook-card .card-content-padding {
    padding: 15px 10px;
  }

  .demo-facebook-card .card-content-padding .likes {
    color: #8e8e93;
  }
</style>
<script>
export default (props, {$, $f7, $on, $store}) => {
  //Export DOM7 to local variable to make it easy accessible
  var app = $f7;
  var $$ = app.$;

  var strNow = new Date();
  //----------------------------------------------------
  $on('pageInit', () => {
      console.log("home.f7 pageInit! ");

      const flag = $store.getters.users.value.length;
      if (!flag > 0)
      {   // ---   Open Login Screen Automatic ----
          console.log('->HOME|pageInit|login-screen..line 288 ! ');
//        $f7.loginScreen.open('.login-screen', true); //Tony : No longer Login each times

          // We got user data from request
          var vUser = {
            firstName: '',
            lastName: '',
            login:'',
            address:''
          };

          // Simulate Ajax Request
          app.request.get('https://adverse.kideduc.com/services/acl.php', { })
              .then(function (res) {
        //////  $$('.login').html(res.data);
                console.log(res.data);

                var statu = JSON.parse(res.data)['success'];
                var users = JSON.parse(res.data)['users'];
                if ( (statu == 0) || (users.length < 1) )  { 
                    // sometimes we got users[0], sometimes got users[NULL], so check and verify
                    $f7.loginScreen.open('.login-screen', true);        // if ACL Failure, we need Login
                    return;
                }  

                vUser.firstName = users[0]["first_name"];
                vUser.lastName  = users[0]["last_name"];
                vUser.login     = users[0]["login"];
                vUser.address   = users[0]["address"];
                console.log('Girl 001 = |' + vUser.login + '|');
                console.log('Address2 = |' + vUser.address + '|');
                console.log('Load was performed');
                
                if (statu == 1)
                { /*
                  $f7.dialog.alert('恭喜您登录成功 !', () => { */
                    // Saving data into Store-Storage  -------------------------
                    $store.state.users = users;

                    // Close Login Screen  -------------------------------------
       //           $f7.loginScreen.close();
                    // ---------------------------------------------------------
                  /*});*/
                }else {
                  console.log('->Unknow Error at line 335 !!'); 
                }
            });

      }

      // Time Clock on ship
      setInterval(function(){
            var today = new Date().getFullYear() +"/"+ (new Date().getMonth() + 1) +"/"+ new Date().getDate();
//          var hours = new Date().getHours() + 2;// Two hours/2h later than CHINESE ~ +2;
            var hours = new Date().getHours();    // Correctly hours;
            var minutes = new Date().getMinutes();
            var seconds = new Date().getSeconds();
            if(hours<10){
                hours = '0'+hours;
            }
            if(minutes<10){
                minutes = '0'+minutes;
            }
            if(seconds<10){
                seconds = '0'+seconds;
            }
            $('span#lisa').text(today+" "+hours+":"+minutes+":"+seconds);
        },1000)

  })
  //----------------------------------------------------
  return $render;
}
</script>